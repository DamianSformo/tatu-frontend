<div *ngIf="product" class="product-detail">
  <!-- Imagen -->
  <div class="image-section">
    <img [src]="product.imageUrl" [alt]="product.name" />
    <span *ngIf="product.isNew" class="badge-new">NUEVO</span>
  </div>

  <!-- Info descriptiva -->
  <div class="info-section">
    <button class="back-btn" (click)="goBack()" aria-label="Volver">‚Üê Volver</button>
    <h2>{{ product.name }}</h2>

    <!-- üîπ Info t√©cnica en 2 columnas con iconos -->
    <ng-container *ngIf="product as p">
      <!-- üî∏ INFO EXCLUSIVA DE VINO üëá -->
      <ng-container *ngIf="p.productType === 'wine'">
        <div class="extra-info">
          <!-- Marca -->
          <div class="info-item">
            <div class="icon purple"><i class="fa-solid fa-wine-glass"></i></div>
            <div class="text">
              <span class="label">Bodega</span>
              <span class="value">
                <a (click)="goToBrand(p.brand)" class="brand-link">
                  {{ p.brand }}
                </a>
              </span>
            </div>
          </div>
          <!-- Origen -->
          <div class="info-item" *ngIf="p.origin">
            <div class="icon blue"><i class="fa-solid fa-location-dot"></i></div>
            <div class="text">
              <span class="label">Origen</span>
              <span class="value">{{ p.origin }}</span>
            </div>
          </div>
          <!-- Regi√≥n -->
          <div class="info-item" *ngIf="p.region">
            <div class="icon blue"><i class="fa-solid fa-map-location-dot"></i></div>
            <div class="text">
              <span class="label">Regi√≥n</span>
              <span class="value">{{ p.region }}</span>
            </div>
          </div>
          <!-- Barrica -->
          <div class="info-item" *ngIf="p.barrica">
            <div class="icon yellow"><i class="fa-solid fa-barrel"></i></div>
            <div class="text">
              <span class="label">Barrica</span>
              <span class="value">{{ p.barrica }}</span>
            </div>
          </div>
          <!-- Servicio -->
          <div class="info-item" *ngIf="p.servicio">
            <div class="icon blue"><i class="fa-solid fa-temperature-low"></i></div>
            <div class="text">
              <span class="label">Servicio</span>
              <span class="value">{{ p.servicio }}</span>
            </div>
          </div>
          <!-- Cosecha -->
          <div class="info-item" *ngIf="p.year">
            <div class="icon yellow"><i class="fa-solid fa-calendar"></i></div>
            <div class="text">
              <span class="label">Cosecha</span>
              <span class="value">{{ p.year }}</span>
            </div>
          </div>
          <!-- Tipo -->
          <div class="info-item" *ngIf="p.type">
            <div class="icon red"><i class="fa-solid fa-wine-bottle"></i></div>
            <div class="text">
              <span class="label">Tipo</span>
              <span class="value">{{ p.type }}</span>
            </div>
          </div>
          <!-- Uva -->
          <div class="info-item" *ngIf="p.variety">
            <div class="icon red"><i class="fa-solid fa-grapes"></i></div>
            <div class="text">
              <span class="label">Uva</span>
              <span class="value">{{ p.variety }}</span>
            </div>
          </div>
          <!-- Regi√≥n -->
          <div class="info-item" *ngIf="p.region">
            <div class="icon blue"><i class="fa-solid fa-map-location-dot"></i></div>
            <div class="text">
              <span class="label">Regi√≥n</span>
              <span class="value">{{ p.region }}</span>
            </div>
          </div>
          <!-- Alcohol -->
          <div class="info-item" *ngIf="p.alcohol">
            <div class="icon grey"><i class="fa-solid fa-percent"></i></div>
            <div class="text">
              <span class="label">Alcohol</span>
              <span class="value">{{ p.alcohol }}%</span>
            </div>
          </div>
          <!-- Volumen -->
          <div class="info-item" *ngIf="getVolumeLabel(p)">
            <div class="icon grey"><i class="fa-solid fa-weight-hanging"></i></div>
            <div class="text">
              <span class="label">Volumen</span>
              <span class="value">{{ getVolumeLabel(p) }}</span>
            </div>
          </div>
        </div>
      </ng-container>

      <!-- üî∏ INFO EXCLUSIVA DE CERVEZA üëá -->
      <ng-container *ngIf="p.productType === 'beer'">
        <div class="extra-info">
          <!-- Marca -->
          <div class="info-item">
            <div class="icon purple"><i class="fa-solid fa-beer-mug-empty"></i></div>
            <div class="text">
              <span class="label">Fabricante</span>
              <span class="value">
                <a (click)="goToBrand(p.brand)" class="brand-link">
                  {{ p.brand }}
                </a>
              </span>
            </div>
          </div>
          <!-- Origen -->
          <div class="info-item" *ngIf="p.origin">
            <div class="icon blue"><i class="fa-solid fa-location-dot"></i></div>
            <div class="text">
              <span class="label">Origen</span>
              <span class="value">{{ p.origin }}</span>
            </div>
          </div>
          <!-- Tipo de Cerveza -->
          <div class="info-item" *ngIf="p.type">
            <div class="icon yellow"><i class="fa-solid fa-beer-mug-empty"></i></div>
            <div class="text">
              <span class="label">Tipo</span>
              <span class="value">{{ p.type }}</span>
            </div>
          </div>
          <!-- IBU -->
          <div class="info-item" *ngIf="p.ibu">
            <div class="icon green"><i class="fa-solid fa-leaf"></i></div>
            <div class="text">
              <span class="label">IBU</span>
              <span class="value">{{ p.ibu }}</span>
            </div>
          </div>
          <!-- Volumen -->
          <div class="info-item" *ngIf="getVolumeLabel(p)">
            <div class="icon grey"><i class="fa-solid fa-weight-hanging"></i></div>
            <div class="text">
              <span class="label">Volumen</span>
              <span class="value">{{ getVolumeLabel(p) }}</span>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>

  <!-- Descripci√≥n de la Bodega (solo para vinos) -->
  <div class="winery-description" *ngIf="product.productType === 'wine' && product.wineryDescription">
    <div class="winery-description">
      <h3>Sobre la Bodega</h3>
      <p>{{ product.wineryDescription }}</p>
    </div>
  </div>

  <!-- Maridaje (solo para vinos) -->
  <div class="maridaje-section" *ngIf="product.productType === 'wine' && product.maridajes && product.maridajes.length > 0">
    <h3>Maridaje</h3>
    <div class="chips-container">
      <span *ngFor="let maridaje of product.maridajes" class="chip">
        {{ maridaje }}
      </span>
    </div>
  </div>



<!-- Perfil del Vino (fuera del bloque anterior) -->

<div class="wine-profile" *ngIf="product.productType === 'wine'">
  <h3>Perfil del Vino</h3>

  <div class="profile-item">
    <span class="profile-label left">Ligero</span>
    <div class="bar"><div class="fill cuerpo" [style.width.%]="product.body"></div></div>
    <span class="profile-label right">Completo</span>
  </div>

  <div class="profile-item">
    <span class="profile-label left">Joven</span>
    <div class="bar"><div class="fill taninos" [style.width.%]="product.tannins"></div></div>
    <span class="profile-label right">Barrica</span>
  </div>

  <div class="profile-item">
    <span class="profile-label left">Dulce</span>
    <div class="bar"><div class="fill dulzor" [style.width.%]="product.sweetness"></div></div>
    <span class="profile-label right">Seco</span>
  </div>

  <!-- Apartado exclusivo: Color, Aroma y Gusto -->
  <div class="wine-attributes" *ngIf="product.color || product.aroma || product.gusto">
    <h4>Notas de Cata</h4>
    <ul>
      <li *ngIf="product.color"><strong>Color:</strong> {{ product.color }}</li>
      <li *ngIf="product.aroma"><strong>Aroma:</strong> {{ product.aroma }}</li>
      <li *ngIf="product.gusto"><strong>Gusto:</strong> {{ product.gusto }}</li>
    </ul>
  </div>
</div>

</div>
<!-- üî∏ FIN BLOQUE EXCLUSIVO DE VINO -->


    <p *ngIf="product.pricePerLiter" class="price-per-liter">
      Precio por 1 LT {{ product.pricePerLiter }}
    </p>


<!-- üîπ Barra fija inferior -->
<div class="bottom-bar" *ngIf="product">
  <div class="price-block">
    <p *ngIf="product.oldPrice" class="old-price">
      ${{ product.oldPrice | number:'1.0-0' }}
    </p>

    <div class="current-price">
      <p class="price">${{ product.price | number:'1.0-0' }}</p>
      <span *ngIf="product.discount" class="discount">-{{ product.discount }}%</span>
    </div>

    <p *ngIf="product.installment" class="installment">{{ product.installment }}</p>
  </div>

  <div class="quantity-control">
    <button *ngIf="quantity === 0" class="add-btn-inner" (click)="addToCart()">
      Agregar
    </button>

    <ng-container *ngIf="quantity > 0">
      <button class="minus-btn" (click)="decrease()">‚àí</button>
      <span class="quantity">{{ quantity }}</span>
      <button class="plus-btn" (click)="increase()">+</button>
    </ng-container>
  </div>
</div>
